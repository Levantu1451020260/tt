<!DOCTYPE html>
<html>
<head>
    <title>Vẽ ảnh bằng số</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        body {
            background: #222;
            color: #fff;
            text-align: center;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }
        canvas {
            display: block;
            margin: 0 auto;
            background: #fff;
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body style="margin:0;background:black;">
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const img = new Image();
        img.src = '/Image/z6939399394991_ef3a34656b997cd659d0d35bb50997c2.jpg';

        img.onload = function () {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.font = "10px monospace"; // chữ to hơn
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";

            const chars = "@%#*+=-:. ";
            const step = window.innerWidth < 600 ? 4 : 6; // nếu màn hình nhỏ thì chi tiết hơn

            for (let y = 0; y < canvas.height; y += step) {
                for (let x = 0; x < canvas.width; x += step) {
                    const i = (y * canvas.width + x) * 4;
                    const r = imgData.data[i];
                    const g = imgData.data[i + 1];
                    const b = imgData.data[i + 2];

                    const gray = 0.299 * r + 0.587 * g + 0.114 * b;
                    const charIndex = Math.floor((gray / 255) * (chars.length - 1));
                    const char = chars[charIndex];

                    ctx.fillStyle = `rgb(${r},${g},${b})`;
                    ctx.fillText(char, x + step / 2, y + step / 2);
                }
            }
        };
    </script>
</body>

</html>
